"use strict";(self["webpackChunkvideogatewayweb"]=self["webpackChunkvideogatewayweb"]||[]).push([[324],{8324:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",[e("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:t.addRules}},[t._v("新增场景")]),e("el-table",{staticClass:"mt-10",staticStyle:{width:"100%"},attrs:{data:t.sceneList}},[e("el-table-column",{attrs:{label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1))]}}])}),e("el-table-column",{attrs:{prop:"scene_name",label:"场景名称"}}),e("el-table-column",{attrs:{prop:"scene_remark",label:"场景备注"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.association(a.row)}}},[e("i",{staticClass:"icon iconf-configuration",attrs:{title:"算法关联"}})]),e("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(e){return t.editData(a.row)}}}),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.delData(a.row)}}},[e("i",{staticClass:"el-icon-delete",staticStyle:{color:"red"},attrs:{title:"删除"}})])]}}])})],1),e("el-dialog",{attrs:{title:t.title,visible:t.addVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.addVisible=e}}},[e("el-form",{ref:"addForm",staticClass:"mt-20",attrs:{model:t.addForm,"label-width":"120px",size:"small"}},[e("el-form-item",{attrs:{label:"场景名称:",prop:"scene_name"}},[e("el-input",{model:{value:t.addForm.scene_name,callback:function(e){t.$set(t.addForm,"scene_name",e)},expression:"addForm.scene_name"}})],1),e("el-form-item",{attrs:{label:"场景备注:",prop:"scene_remark"}},[e("el-input",{model:{value:t.addForm.scene_remark,callback:function(e){t.$set(t.addForm,"scene_remark",e)},expression:"addForm.scene_remark"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.addVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("addForm")}}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"算法配置",visible:t.algorithmVisible,width:"60%","close-on-click-modal":!1},on:{"update:visible":function(e){t.algorithmVisible=e}}},[e("el-table",{ref:"algorithmTable",staticStyle:{width:"100%"},attrs:{data:t.algorithmList},on:{select:t.chooseAlgorithm}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),e("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),e("el-table-column",{attrs:{prop:"ai_code",label:"报警编号",align:"center"}}),e("el-table-column",{attrs:{prop:"ai_name",label:"算法名称",align:"center"}})],1),e("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"float-right mt-10",attrs:{total:t.total,page:t.params.page,limit:t.params.size,layout:"total, prev, pager, next",small:""},on:{"update:page":function(e){return t.$set(t.params,"page",e)},"update:limit":function(e){return t.$set(t.params,"size",e)},pagination:t.getAlgorithmList}})],1)],1)},s=[],l=(a(3239),a(7644),a(6332),{data(){return{sceneList:[],addForm:{},addVisible:!1,title:"新增场景",addRulesObject:{},updetaData:{},algorithmVisible:!1,algorithmList:[],params:{page:1,size:10},total:0,sceneItem:{}}},created(){this.getSceneList(),this.getAlgorithmList()},methods:{getDataAiSceneList(){this.$refs.algorithmTable&&this.$refs.algorithmTable.clearSelection(),this.$api.get("/ai/getDataAiSceneList",{params:{scene_id:this.sceneItem.scene_id}}).then(t=>{if(t.data.data){let e=t.data.data;this.$nextTick(()=>{e.forEach(t=>{const e=this.algorithmList.find(e=>e.ai_id===t.ai_id);e&&this.$refs.algorithmTable.toggleRowSelection(e,!0)})})}})},chooseAlgorithm(t,e){const a=t.indexOf(e)>-1?"/ai/addDataAiScene":"/ai/delDataAiScene";this.$api.post(a,{ai_id:e.ai_id,scene_id:this.sceneItem.scene_id}).then(()=>{this.$message.success("操作成功")})},getAlgorithmList(){this.$api.get("/ai/getDataAiList",{params:this.params}).then(t=>{t.data.data&&(this.algorithmList=t.data.data,this.total=t.data.total)})},association(t){this.sceneItem=t,this.algorithmVisible=!0,this.getDataAiSceneList()},submitForm(){const t=!!this.addForm.scene_id,e=t?"/ai/updateDataScene":"/ai/addDataScene";this.$api.post(e,this.addForm).then(()=>{this.addVisible=!1,this.$message.success("操作成功"),this.getSceneList()}).catch(t=>{console.error("操作失败:",t),this.$message.error("操作失败")})},delData(t){this.$confirm("是否删除该数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$api.post("/ai/delDataAiScene",{scene_id:t.scene_id}).then(()=>{this.$message.success("操作成功"),this.getSceneList()})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},editData(t){this.title="编辑场景",this.addVisible=!0,this.addForm={...t}},addRules(t){this.addForm={},this.title="新增场景",this.addVisible=!0,this.addRulesObject=t},getSceneList(){this.$api.get("/ai/getDataSceneList",{params:{page:1,size:3}}).then(t=>{this.sceneList=t.data.data})}}}),n=l,o=a(6790),r=(0,o.A)(n,i,s,!1,null,"4dd909fd",null),c=r.exports}}]);
//# sourceMappingURL=324.8bfdba4e.js.map