{"version":3,"file":"js/368.0f63854b.js","mappings":"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","sources":["webpack://videogatewayweb/./src/views/collection/AI.vue","webpack://videogatewayweb/./src/components/drawPanel.vue","webpack://videogatewayweb/src/components/drawPanel.vue","webpack://videogatewayweb/./src/components/drawPanel.vue?a72d","webpack://videogatewayweb/./src/components/drawPanel.vue?7c88","webpack://videogatewayweb/src/views/collection/AI.vue","webpack://videogatewayweb/./src/views/collection/AI.vue?360b","webpack://videogatewayweb/./src/views/collection/AI.vue?8670"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-page-header',{on:{\"back\":_vm.goBack}}),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"d-flex flex-start\"},[_c('el-button',{staticClass:\"el-icon-circle-plus mr-10\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.addTab(_vm.tabIndex)}}}),(_vm.algorithmList.length > 0)?_c('el-tabs',{staticStyle:{\"width\":\"100%\"},attrs:{\"closable\":\"\",\"size\":\"small\"},on:{\"tab-remove\":_vm.removeTab,\"tab-click\":_vm.chooseTab},model:{value:(_vm.tabIndex),callback:function ($$v) {_vm.tabIndex=$$v},expression:\"tabIndex\"}},[_vm._l((_vm.algorithmList),function(item){return _c('el-tab-pane',{key:item.ai_id,attrs:{\"label\":item.ai_name,\"name\":item.name}})}),(!_vm.completedDraw)?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.completedDraw = true}}},[_vm._v(\"绘制区域\")]):_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){_vm.completedDraw = false}}},[_vm._v(\"结束绘制\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"plain\":\"\"},on:{\"click\":_vm.reset}},[_vm._v(\"清除全部规则\")]),_c('div',{staticClass:\"mt-10 d-flex\",staticStyle:{\"width\":\"100%\",\"height\":\"414px\"}},[_c('div',{staticStyle:{\"width\":\"736px\",\"height\":\"100%\",\"background\":\"#000\",\"position\":\"relative\"}},[(_vm.videoVisible)?_c('videoPlayer',{ref:\"videoPlayer\",staticStyle:{\"height\":\"100%\"},attrs:{\"src\":_vm.videoUrl},on:{\"resolution-ready\":_vm.handleResolution,\"getVideo\":_vm.getVideo,\"closeVideo\":_vm.closeVideo}}):_vm._e(),(_vm.canvasVisible)?_c('DrawPanel',{ref:\"canvasVueRef\",staticStyle:{\"height\":\"100%\",\"z-index\":\"1\",\"position\":\"absolute\",\"width\":\"100%\",\"top\":\"0\"},attrs:{\"single\":\"\",\"completedDraw\":_vm.completedDraw,\"pointArr\":_vm.formData.area,\"ratio\":_vm.ratio,\"fullScreen\":_vm.fullScreen},on:{\"finish\":_vm.handleDrawFinish}}):_vm._e()],1),_c('div',{staticClass:\"ml-20\"},[_c('span',{staticClass:\"f-bold fs-16\"},[_vm._v(\"属性配置\")]),_c('el-form',{ref:\"formData\",staticStyle:{\"width\":\"80%\"},attrs:{\"model\":_vm.formData,\"label-width\":\"200px\",\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"报警时间间隔(秒):\"}},[_c('el-input-number',{attrs:{\"min\":0,\"step\":0.1},model:{value:(_vm.formData.interval),callback:function ($$v) {_vm.$set(_vm.formData, \"interval\", $$v)},expression:\"formData.interval\"}})],1),_c('el-form-item',{attrs:{\"label\":\"报警阈值:\"}},[_c('el-input-number',{attrs:{\"min\":0.2,\"step\":0.1},model:{value:(_vm.formData.threshold),callback:function ($$v) {_vm.$set(_vm.formData, \"threshold\", $$v)},expression:\"formData.threshold\"}})],1),_c('el-button',{staticStyle:{\"float\":\"right\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveData}},[_vm._v(\"保存\")])],1)],1)])],2):_c('el-empty',{staticStyle:{\"width\":\"100%\"},attrs:{\"description\":\"暂无内容\"}}),_c('el-drawer',{attrs:{\"title\":\"场景列表\",\"visible\":_vm.sceneVisble,\"size\":\"40%\"},on:{\"update:visible\":function($event){_vm.sceneVisble=$event}}},[_c('div',{staticClass:\"p-20\",staticStyle:{\"position\":\"relative\"}},[_c('el-collapse',{attrs:{\"accordion\":\"\"},on:{\"change\":_vm.handleChange}},_vm._l((_vm.sceneList),function(item,index){return _c('el-collapse-item',{key:index,attrs:{\"title\":item.scene_name,\"name\":index}},[_c('el-checkbox-group',{attrs:{\"size\":\"small\"},model:{value:(_vm.checkedTabs),callback:function ($$v) {_vm.checkedTabs=$$v},expression:\"checkedTabs\"}},_vm._l((item.children),function(value){return _c('el-checkbox',{key:value.ai_id,attrs:{\"label\":JSON.stringify(value),\"border\":\"\"},on:{\"change\":_vm.handleCheckedTabs}},[_vm._v(_vm._s(value.ai_name))])}),1)],1)}),1)],1),_c('div',{staticStyle:{\"position\":\"absolute\",\"bottom\":\"10px\",\"right\":\"10px\"}},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.sceneVisble = false}}},[_vm._v(\"取 消\")])],1)])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{ref:\"canvasBox\",staticClass:\"canvas-box solid\"},[_c('canvas',{ref:\"canvas\"}),_c('canvas',{ref:\"canvasSaveinfo\",on:{\"mousemove\":_vm.handleCanvasSaveMove,\"mouseup\":_vm.handleCanvasMouseUp,\"mousedown\":_vm.handleCanvasMouseDown}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"canvas-box solid\" ref=\"canvasBox\">\r\n      <!--用来和鼠标进行交互操作的canvas-->\r\n      <canvas ref=\"canvas\"></canvas>\r\n      <!--存储已生成的点线，避免被清空-->\r\n      <canvas\r\n        ref=\"canvasSaveinfo\"\r\n        @mousemove=\"handleCanvasSaveMove\"\r\n        @mouseup=\"handleCanvasMouseUp\"\r\n        @mousedown=\"handleCanvasMouseDown\"\r\n      ></canvas>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  props: {\r\n    single: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    completedDraw: {\r\n      type: Boolean,\r\n      required: false,\r\n    },\r\n    pointArr: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n    ratio: {\r\n      type: Number,\r\n    },\r\n    fullScreen: {\r\n      type: Boolean,\r\n      required: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      canvasForm: {\r\n        coincidentDistance: 10,\r\n        oIndex: -1,\r\n        pointArr: [],\r\n        MovePointArr: [],\r\n        pointX: \"\",\r\n        pointY: \"\",\r\n        ctxSave: \"\",\r\n        canSave: \"\",\r\n        ctx: \"\",\r\n        can: \"\",\r\n        lineColor: \"rgba(64, 158, 255, 1)\",\r\n        open: true,\r\n        completedDraw: false,\r\n        clickMove: false,\r\n        pointColorArr: [],\r\n      },\r\n      pointColorArr: JSON.parse(JSON.stringify(this.pointArr)),\r\n    };\r\n  },\r\n  watch: {\r\n    ratio() {\r\n      this.initCanvas();\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.initCanvas();\r\n    });\r\n  },\r\n  methods: {\r\n    // 初始化画布\r\n    initCanvas() {\r\n      this.canvasForm.can = this.$refs.canvas;\r\n      this.canvasForm.can.width = this.$refs.canvasBox.clientWidth;\r\n      this.canvasForm.can.height = this.$refs.canvasBox.clientHeight;\r\n      this.canvasForm.ctx = this.canvasForm.can.getContext(\"2d\");\r\n      this.canvasForm.ctx.strokeStyle = this.canvasForm.lineColor;\r\n      this.canvasForm.ctx.fillStyle = \"rgba(64, 158, 255,0.1)\";\r\n      this.canvasForm.ctx.lineWidth = 4;\r\n      this.canvasForm.ctx.globalAlpha = 0.7;\r\n\r\n      this.canvasForm.canSave = this.$refs.canvasSaveinfo;\r\n      this.canvasForm.canSave.width = this.$refs.canvasBox.clientWidth;\r\n      this.canvasForm.canSave.height = this.$refs.canvasBox.clientHeight;\r\n      this.canvasForm.ctxSave = this.canvasForm.canSave.getContext(\"2d\");\r\n      this.canvasForm.ctxSave.strokeStyle = this.canvasForm.lineColor;\r\n      this.canvasForm.ctxSave.fillStyle = \"rgba(64, 158, 255,0.1)\";\r\n      this.canvasForm.ctxSave.lineWidth = 4;\r\n      this.canvasForm.ctxSave.globalAlpha = 0.7;\r\n\r\n      this.pointColorArr.map((item) => {\r\n        item.forEach((xitem) => {\r\n          xitem.x = xitem.x * this.ratio;\r\n          xitem.y = xitem.y * this.ratio;\r\n        });\r\n        item.push(item[0]);\r\n        item.color = \"#a0cfff\";\r\n        this.canvasFill(item, item.color);\r\n        //   item.x = item.x * this.ratio;\r\n        //   item.y = item.y * this.ratio;\r\n        //   item.color = \"#a0cfff\";\r\n        // console.log(this.pointColorArr);\r\n\r\n        // this.canvasFill(this.pointColorArr,\"#a0cfff\");\r\n      });\r\n    },\r\n\r\n    // 文字\r\n    canvasText(text, point) {\r\n      this.canvasForm.ctxSave.font = \"18px Consolas\";\r\n      this.canvasForm.ctxSave.textAlign = \"center\";\r\n      this.canvasForm.ctxSave.textBaseline = \"middle\";\r\n      this.canvasForm.ctxSave.fillStyle = \"red\";\r\n      if (point[0].x == 0) {\r\n        this.canvasForm.ctxSave.fillText(\r\n          text,\r\n          point[0].x + 100,\r\n          point[0].y + 50\r\n        );\r\n      } else {\r\n        this.canvasForm.ctxSave.fillText(\r\n          text,\r\n          point[0].x + 10,\r\n          point[0].y + 10\r\n        );\r\n      }\r\n      this.canvasForm.ctxSave.arc(point[0].x, point[0].y, 3, 0, Math.PI * 2);\r\n    },\r\n\r\n    // 回显\r\n    canvasFill(pointArr, color) {\r\n      this.canvasForm.ctxSave.clearRect(\r\n        0,\r\n        0,\r\n        this.canvasForm.ctxSave.width,\r\n        this.canvasForm.ctxSave.height\r\n      );\r\n      this.canvasForm.ctxSave.beginPath();\r\n      if (pointArr.length > 1) {\r\n        this.canvasForm.ctxSave.moveTo(pointArr[0].x, pointArr[0].y);\r\n        for (let i = 1; i < pointArr.length; i++) {\r\n          this.canvasForm.ctxSave.lineTo(pointArr[i].x, pointArr[i].y);\r\n        }\r\n        this.canvasForm.ctxSave.fillStyle = `${color}B3`;\r\n        this.canvasForm.ctxSave.fill();\r\n        this.canvasForm.ctxSave.lineTo(pointArr[0].x, pointArr[0].y);\r\n        this.canvasForm.ctxSave.stroke();\r\n        // this.canvasText(houseName, pointArr);\r\n      }\r\n    },\r\n\r\n    handleCanvasMouseUp() {\r\n      if (this.canvasForm.clickMove) {\r\n        this.canvasForm.clickMove = false;\r\n        this.canvasForm.pointArr = this.canvasForm.MovePointArr;\r\n      }\r\n    },\r\n\r\n    // 点击画点\r\n    handleCanvasMouseDown(e) {\r\n      if (!this.completedDraw) {\r\n        return;\r\n      }\r\n      if (e.offsetX || e.layerX) {\r\n        this.canvasForm.pointX = e.offsetX == undefined ? e.layerX : e.offsetX;\r\n        this.canvasForm.pointY = e.offsetY == undefined ? e.layerY : e.offsetY;\r\n        let piX, piY;\r\n        if (this.canvasForm.oIndex > 0 && this.canvasForm.pointArr.length > 0) {\r\n          piX = this.canvasForm.pointArr[0].x;\r\n          piY = this.canvasForm.pointArr[0].y;\r\n          //画点\r\n          this.makearc(\r\n            this.canvasForm.ctx,\r\n            piX,\r\n            piY,\r\n            this.GetRandomNum(2, 2),\r\n            0,\r\n            180,\r\n            \"rgba(102,168,255,1)\"\r\n          );\r\n          this.canvasForm.pointArr.push({ x: piX, y: piY });\r\n          this.canvasSave(this.canvasForm.pointArr);\r\n          this.saveCanvas();\r\n        } else {\r\n          piX = this.canvasForm.pointX;\r\n          piY = this.canvasForm.pointY;\r\n          this.makearc(\r\n            this.canvasForm.ctx,\r\n            piX,\r\n            piY,\r\n            this.GetRandomNum(2, 2),\r\n            0,\r\n            180,\r\n            \"rgba(102,168,255,1)\"\r\n          );\r\n          this.canvasForm.pointArr.push({ x: piX, y: piY });\r\n          this.canvasSave(this.canvasForm.pointArr);\r\n        }\r\n      }\r\n    },\r\n\r\n    // 移动画线\r\n    handleCanvasSaveMove(e) {\r\n      if (!this.completedDraw) {\r\n        return;\r\n      }\r\n      if (e.offsetX || e.layerX) {\r\n        this.canvasForm.pointX = e.offsetX == undefined ? e.layerX : e.offsetX;\r\n        this.canvasForm.pointY = e.offsetY == undefined ? e.layerY : e.offsetY;\r\n        let piX, piY;\r\n        /*清空画布*/\r\n        this.canvasForm.ctx.clearRect(\r\n          0,\r\n          0,\r\n          this.canvasForm.can.width,\r\n          this.canvasForm.can.height\r\n        );\r\n        /*鼠标下跟随的圆点*/\r\n        this.makearc(\r\n          this.canvasForm.ctx,\r\n          this.canvasForm.pointX,\r\n          this.canvasForm.pointY,\r\n          this.GetRandomNum(4, 4),\r\n          0,\r\n          180,\r\n          \"rgba(102,168,255,1)\"\r\n        );\r\n\r\n        if (this.canvasForm.pointArr.length > 0) {\r\n          if (\r\n            this.canvasForm.pointX > this.canvasForm.pointArr[0].x - 15 &&\r\n            this.canvasForm.pointX < this.canvasForm.pointArr[0].x + 15 &&\r\n            this.canvasForm.pointY > this.canvasForm.pointArr[0].y - 15 &&\r\n            this.canvasForm.pointY < this.canvasForm.pointArr[0].y + 15\r\n          ) {\r\n            if (this.canvasForm.pointArr.length > 1) {\r\n              piX = this.canvasForm.pointArr[0].x;\r\n              piY = this.canvasForm.pointArr[0].y;\r\n              this.canvasForm.ctx.clearRect(\r\n                0,\r\n                0,\r\n                this.canvasForm.can.width,\r\n                this.canvasForm.can.height\r\n              );\r\n              this.makearc(\r\n                this.canvasForm.ctx,\r\n                piX,\r\n                piY,\r\n                this.GetRandomNum(4, 4),\r\n                0,\r\n                180,\r\n                \"rgba(102,168,255,1)\"\r\n              );\r\n              this.canvasForm.oIndex = 1;\r\n            }\r\n          } else {\r\n            piX = this.canvasForm.pointX;\r\n            piY = this.canvasForm.pointY;\r\n            this.canvasForm.oIndex = -1;\r\n          }\r\n          /*开始绘制*/\r\n          this.canvasForm.ctx.beginPath();\r\n          this.canvasForm.ctx.moveTo(\r\n            this.canvasForm.pointArr[0].x,\r\n            this.canvasForm.pointArr[0].y\r\n          );\r\n          if (this.canvasForm.pointArr.length > 1) {\r\n            for (let i = 1; i < this.canvasForm.pointArr.length; i++) {\r\n              this.canvasForm.ctx.lineTo(\r\n                this.canvasForm.pointArr[i].x,\r\n                this.canvasForm.pointArr[i].y\r\n              );\r\n            }\r\n          }\r\n          this.canvasForm.ctx.lineTo(piX, piY);\r\n          this.canvasForm.ctx.fillStyle = \"rgba(161,195,255,1)\";\r\n          this.canvasForm.ctx.fill();\r\n          this.canvasForm.ctx.stroke();\r\n        }\r\n      }\r\n    },\r\n\r\n    // 存储已生成的点线\r\n    canvasSave(pointArr) {\r\n      this.canvasForm.ctxSave.clearRect(\r\n        0,\r\n        0,\r\n        this.canvasForm.ctxSave.width,\r\n        this.canvasForm.ctxSave.height\r\n      );\r\n      this.canvasForm.ctxSave.beginPath();\r\n      if (pointArr.length > 1) {\r\n        this.canvasForm.ctxSave.moveTo(pointArr[0].x, pointArr[0].y);\r\n        for (let i = 1; i < pointArr.length; i++) {\r\n          this.canvasForm.ctxSave.lineTo(pointArr[i].x, pointArr[i].y);\r\n          this.canvasForm.ctxSave.fillStyle = \"rgba(161,195,255,0.2)\";\r\n          this.canvasForm.ctxSave.stroke();\r\n        }\r\n        this.canvasForm.ctxSave.closePath();\r\n      }\r\n      // if (pointArr.length > 4) {\r\n      //   this.revoke();\r\n      //   let { 0: a, [pointArr.length - 1]: b } = pointArr;\r\n      //   a.x = b.x;\r\n      //   console.log(a, \"a\");\r\n      //   console.log(b);\r\n      // }\r\n      if (pointArr.length > 1) {\r\n        let { 0: a, [pointArr.length - 1]: b } = pointArr;\r\n        if (a.x == b.x && b.y == b.y) {\r\n          console.log(\"结束绘制\");\r\n        }\r\n      }\r\n    },\r\n\r\n    /*生成画布 结束绘画*/\r\n    saveCanvas() {\r\n      if (this.canvasForm.pointArr.length <= 3) {\r\n        this.revoke();\r\n        return;\r\n      }\r\n      this.canvasForm.ctx.clearRect(\r\n        0,\r\n        0,\r\n        this.canvasForm.can.width,\r\n        this.canvasForm.can.height\r\n      );\r\n      this.canvasForm.ctxSave.closePath();\r\n      this.canvasForm.ctxSave.fill();\r\n      this.canvasForm.ctxSave.stroke();\r\n      this.$emit(\"finish\", this.canvasForm.pointArr.slice(1));\r\n      this.canvasForm.pointArr = [];\r\n    },\r\n\r\n    /*canvas生成圆点*/\r\n    GetRandomNum(Min, Max) {\r\n      let Range = Max - Min;\r\n      let Rand = Math.random();\r\n      return Min + Math.round(Rand * Range);\r\n    },\r\n\r\n    // 画点\r\n    makearc(ctx, x, y, r, s, e, color) {\r\n      ctx.clearRect(0, 0, 199, 202);\r\n      ctx.beginPath();\r\n      ctx.fillStyle = color;\r\n      ctx.arc(x, y, r, s, e);\r\n      ctx.fill();\r\n    },\r\n\r\n    // 重置\r\n    reset() {\r\n      this.canvasForm.ctx.clearRect(\r\n        0,\r\n        0,\r\n        this.canvasForm.can.width,\r\n        this.canvasForm.can.height\r\n      );\r\n      this.canvasForm.ctxSave.clearRect(\r\n        0,\r\n        0,\r\n        this.canvasForm.canSave.width,\r\n        this.canvasForm.canSave.height\r\n      );\r\n      this.canvasForm.pointArr = [];\r\n      this.canvasForm.completedDraw = false;\r\n      this.canvasForm.open = false;\r\n    },\r\n\r\n    // 撤销上一步\r\n    revoke() {\r\n      if (this.canvasForm.open && this.single) {\r\n        this.reset();\r\n      }\r\n      this.canvasForm.ctx.clearRect(\r\n        0,\r\n        0,\r\n        this.canvasForm.can.width,\r\n        this.canvasForm.can.height\r\n      );\r\n      this.canvasForm.ctxSave.clearRect(\r\n        0,\r\n        0,\r\n        this.canvasForm.canSave.width,\r\n        this.canvasForm.canSave.height\r\n      );\r\n      this.canvasForm.pointArr.pop();\r\n      this.canvasForm.pointArr.map((item) => {\r\n        let _e = {\r\n          layerX: item.x,\r\n          layerY: item.y,\r\n        };\r\n        this.handleCanvasSaveMove(_e);\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.canvas-box {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.canvas-box canvas {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.101.2/node_modules/thread-loader/dist/cjs.js!../../node_modules/.pnpm/babel-loader@8.4.1_mlq2w24ovccw2zzwyvf7z5k5qa/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/.pnpm/vue-loader@15.11.1_7z3qvuhbfa5xwvetfv2z7hc6ey/node_modules/vue-loader/lib/index.js??vue-loader-options!./drawPanel.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.101.2/node_modules/thread-loader/dist/cjs.js!../../node_modules/.pnpm/babel-loader@8.4.1_mlq2w24ovccw2zzwyvf7z5k5qa/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/.pnpm/vue-loader@15.11.1_7z3qvuhbfa5xwvetfv2z7hc6ey/node_modules/vue-loader/lib/index.js??vue-loader-options!./drawPanel.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./drawPanel.vue?vue&type=template&id=500a5bac&scoped=true\"\nimport script from \"./drawPanel.vue?vue&type=script&lang=js\"\nexport * from \"./drawPanel.vue?vue&type=script&lang=js\"\nimport style0 from \"./drawPanel.vue?vue&type=style&index=0&id=500a5bac&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/.pnpm/vue-loader@15.11.1_7z3qvuhbfa5xwvetfv2z7hc6ey/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"500a5bac\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <el-page-header @back=\"goBack\"> </el-page-header>\r\n    <div class=\"d-flex flex-start\" v-loading=\"loading\">\r\n      <el-button\r\n        type=\"text\"\r\n        class=\"el-icon-circle-plus mr-10\"\r\n        @click=\"addTab(tabIndex)\"\r\n      >\r\n      </el-button>\r\n      <el-tabs\r\n        v-model=\"tabIndex\"\r\n        closable\r\n        @tab-remove=\"removeTab\"\r\n        @tab-click=\"chooseTab\"\r\n        size=\"small\"\r\n        style=\"width: 100%\"\r\n        v-if=\"algorithmList.length > 0\"\r\n      >\r\n        <el-tab-pane\r\n          v-for=\"item in algorithmList\"\r\n          :key=\"item.ai_id\"\r\n          :label=\"item.ai_name\"\r\n          :name=\"item.name\"\r\n        >\r\n        </el-tab-pane>\r\n        <el-button\r\n          type=\"primary\"\r\n          size=\"small\"\r\n          v-if=\"!completedDraw\"\r\n          @click=\"completedDraw = true\"\r\n          >绘制区域</el-button\r\n        >\r\n        <el-button\r\n          type=\"primary\"\r\n          size=\"small\"\r\n          v-else\r\n          @click=\"completedDraw = false\"\r\n          >结束绘制</el-button\r\n        >\r\n        <el-button type=\"primary\" size=\"small\" plain @click=\"reset\"\r\n          >清除全部规则</el-button\r\n        >\r\n        <div style=\"width: 100%; height: 414px\" class=\"mt-10 d-flex\">\r\n          <div\r\n            style=\"\r\n              width: 736px;\r\n              height: 100%;\r\n              background: #000;\r\n              position: relative;\r\n            \"\r\n          >\r\n            <videoPlayer\r\n              ref=\"videoPlayer\"\r\n              v-if=\"videoVisible\"\r\n              :src=\"videoUrl\"\r\n              style=\"height: 100%\"\r\n              @resolution-ready=\"handleResolution\"\r\n              @getVideo=\"getVideo\"\r\n              @closeVideo=\"closeVideo\"\r\n            ></videoPlayer>\r\n            <DrawPanel\r\n              style=\"\r\n                height: 100%;\r\n                z-index: 1;\r\n                position: absolute;\r\n                width: 100%;\r\n                top: 0;\r\n              \"\r\n              single\r\n              v-if=\"canvasVisible\"\r\n              ref=\"canvasVueRef\"\r\n              @finish=\"handleDrawFinish\"\r\n              :completedDraw=\"completedDraw\"\r\n              :pointArr=\"formData.area\"\r\n              :ratio=\"ratio\"\r\n              :fullScreen=\"fullScreen\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"ml-20\">\r\n            <span class=\"f-bold fs-16\">属性配置</span>\r\n            <el-form\r\n              :model=\"formData\"\r\n              ref=\"formData\"\r\n              label-width=\"200px\"\r\n              size=\"small\"\r\n              style=\"width: 80%\"\r\n            >\r\n              <el-form-item label=\"报警时间间隔(秒):\">\r\n                <el-input-number\r\n                  v-model=\"formData.interval\"\r\n                  :min=\"0\"\r\n                  :step=\"0.1\"\r\n                >\r\n                </el-input-number>\r\n              </el-form-item>\r\n              <el-form-item label=\"报警阈值:\">\r\n                <el-input-number\r\n                  v-model=\"formData.threshold\"\r\n                  :min=\"0.2\"\r\n                  :step=\"0.1\"\r\n                >\r\n                </el-input-number>\r\n              </el-form-item>\r\n              <el-button type=\"primary\" style=\"float: right\" @click=\"saveData\"\r\n                >保存</el-button\r\n              >\r\n            </el-form>\r\n          </div>\r\n        </div>\r\n      </el-tabs>\r\n      <el-empty v-else description=\"暂无内容\" style=\"width: 100%\"></el-empty>\r\n      <el-drawer title=\"场景列表\" :visible.sync=\"sceneVisble\" size=\"40%\">\r\n        <div class=\"p-20\" style=\"position: relative\">\r\n          <el-collapse @change=\"handleChange\" accordion>\r\n            <el-collapse-item\r\n              :title=\"item.scene_name\"\r\n              :name=\"index\"\r\n              v-for=\"(item, index) in sceneList\"\r\n              :key=\"index\"\r\n            >\r\n              <el-checkbox-group size=\"small\" v-model=\"checkedTabs\">\r\n                <el-checkbox\r\n                  @change=\"handleCheckedTabs\"\r\n                  v-for=\"value in item.children\"\r\n                  :label=\"JSON.stringify(value)\"\r\n                  :key=\"value.ai_id\"\r\n                  border\r\n                  >{{ value.ai_name }}</el-checkbox\r\n                >\r\n              </el-checkbox-group>\r\n            </el-collapse-item>\r\n          </el-collapse>\r\n        </div>\r\n        <div style=\"position: absolute; bottom: 10px; right: 10px\">\r\n          <el-button @click=\"sceneVisble = false\" size=\"small\">取 消</el-button>\r\n        </div>\r\n      </el-drawer>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DrawPanel from \"@/components/drawPanel.vue\";\r\nimport videoPlayer from \"@/components/videoPlayer.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    DrawPanel,\r\n    videoPlayer,\r\n  },\r\n  data() {\r\n    return {\r\n      tabIndex: \"0\",\r\n      algorithmList: [],\r\n      formData: {\r\n        area: [],\r\n        threshold: 0.5,\r\n        interval: 60,\r\n      },\r\n      videoUrl: \"\",\r\n      canvasVisible: false,\r\n      sceneVisble: false,\r\n      sceneList: [],\r\n      activeNames: 0,\r\n      checkAll: false,\r\n      checkedTabs: [],\r\n      isIndeterminate: true,\r\n      ratio: 1,\r\n      completedDraw: false,\r\n      pointArr: [],\r\n      fullScreen: false,\r\n      pro_id: \"\",\r\n      loading: false,\r\n      videoVisible: false,\r\n      videLoad: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.getSceneList();\r\n    this.formData.pro_id = Number(this.$route.query.pro_id);\r\n    this.getDataAiPropertyList();\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    if (to.name == \"collectionConfiguration\") {\r\n      const { source_id, sourceTab, page } = this.$route.query;\r\n      to.query.source_id = source_id;\r\n      to.query.sourceTab = sourceTab;\r\n      to.query.page = page;\r\n    }\r\n    next();\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    closeVideo() {\r\n      this.$api.get(\"/media/stopPlay\", {\r\n        params: { pro_id: this.formData.pro_id },\r\n      });\r\n    },\r\n    goBack() {\r\n      this.$router.back();\r\n    },\r\n    // 获取比例\r\n    handleResolution(e) {\r\n      this.ratio = e.boxWdith / e.videoWidth;\r\n      this.videLoad = true;\r\n      this.canvasVisible = true;\r\n    },\r\n    getVideo() {\r\n      this.$api\r\n        .get(\"/media/play\", { params: { pro_id: this.formData.pro_id } })\r\n        .then((res) => {\r\n          if (res.data.data.play_url) {\r\n            this.videoUrl = this.getUrl(res.data.data.play_url);\r\n            // this.videoUrl = res.data.data.play_url.replace(\r\n            //   \"127.0.0.1\",\r\n            //   \"192.168.0.100\"\r\n            // );\r\n            this.videoVisible = true;\r\n          } else {\r\n            this.$message.warning(\"操作成功\");\r\n          }\r\n        });\r\n    },\r\n    getUrl(playUrl) {\r\n      const { hostname } = window.location;\r\n      const newUrl = playUrl.replace(this.getIPFromURL(playUrl), hostname);\r\n      return newUrl;\r\n    },\r\n    getIPFromURL(url) {\r\n      const match = url.match(/\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}/)[0];\r\n      return match;\r\n    },\r\n    chooseTab() {\r\n      this.completedDraw = false;\r\n      this.getDataAiPropertyList();\r\n    },\r\n    // 保存数据\r\n    saveData() {\r\n      this.formData.ai_id = this.algorithmList[this.tabIndex].ai_id;\r\n      this.formData.ai_pro_id = this.algorithmList[this.tabIndex].ai_pro_id;\r\n      this.formData.area = JSON.stringify(this.formData.area);\r\n      this.$api.post(\"/ai/updateDataAiProperty\", this.formData).then(() => {\r\n        this.getDataAiPropertyList();\r\n        this.$message.success(\"操作成功\");\r\n      });\r\n    },\r\n    // ai与属性关系列表\r\n    async getDataAiPropertyList() {\r\n      this.loading = true;\r\n      this.canvasVisible = false;\r\n      this.checkedTabs = [];\r\n      this.$api\r\n        .get(\"/ai/getDataAiPropertyList\", {\r\n          params: { pro_id: this.formData.pro_id },\r\n        })\r\n        .then((r) => {\r\n          if (r.data.data) {\r\n            this.algorithmList =\r\n              r.data.data.map((item, index) => {\r\n                return {\r\n                  ...item,\r\n                  name: index.toString(),\r\n                };\r\n              }) || [];\r\n            this.checkedTabs = r.data.data.map((item) => {\r\n              let data = {\r\n                ai_id: item.ai_id,\r\n                ai_name: item.ai_name,\r\n              };\r\n              return JSON.stringify(data);\r\n            });\r\n            let data = this.algorithmList[this.tabIndex];\r\n            this.formData = {\r\n              ...data,\r\n              area: data.area ? JSON.parse(data.area) : [],\r\n              threshold: data.threshold || 0.5,\r\n              interval: data.interval || 60,\r\n            };\r\n            if (this.videoUrl) {\r\n              this.canvasVisible = this.videLoad;\r\n            } else {\r\n              this.getVideo();\r\n            }\r\n          } else {\r\n            this.algorithmList = [];\r\n          }\r\n        })\r\n        .finally(() => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n    // 清空画布\r\n    reset() {\r\n      this.$refs.canvasVueRef.reset();\r\n      this.formData.area = [];\r\n    },\r\n    // 绘制完成\r\n    handleDrawFinish(e) {\r\n      // 编辑的时候不需要二次计算\r\n      let region = e.map((item) => {\r\n        return {\r\n          x: item.x / this.ratio,\r\n          y: item.y / this.ratio,\r\n        };\r\n      });\r\n      this.formData.area.push(region);\r\n    },\r\n    // 获取场景列表\r\n    getSceneList() {\r\n      this.$api.get(\"/ai/getDataSceneList\").then((res) => {\r\n        this.sceneList = res.data.data;\r\n      });\r\n    },\r\n    // 展开场景\r\n    async handleChange(e) {\r\n      if (e !== \"\") {\r\n        let res = await this.$api.get(\"/ai/getDataAiSceneList\", {\r\n          params: {\r\n            scene_id: this.sceneList[e].scene_id,\r\n          },\r\n        });\r\n        if (res.data.data) {\r\n          let data = res.data.data.map((item) => {\r\n            return {\r\n              ai_id: item.ai_id,\r\n              ai_name: item.ai_name,\r\n            };\r\n          });\r\n          this.$set(this.sceneList[e], \"children\", data);\r\n        }\r\n      }\r\n    },\r\n    // 选择分类\r\n    handleCheckedTabs(checked, e) {\r\n      let data = JSON.parse(e.target.value);\r\n      if (checked) {\r\n        this.$api\r\n          .post(\"/ai/addDataAiProperty\", {\r\n            pro_id: this.formData.pro_id,\r\n            ai_id: [data.ai_id],\r\n          })\r\n          .then(() => {\r\n            this.getDataAiPropertyList();\r\n            this.$message.success(\"操作成功\");\r\n          });\r\n      }\r\n    },\r\n\r\n    addTab() {\r\n      this.sceneVisble = true;\r\n    },\r\n    // 删除标签\r\n    removeTab(targetName) {\r\n      this.$api\r\n        .post(\"/ai/delDataAiProperty\", {\r\n          pro_id: this.formData.pro_id,\r\n          ai_id: [this.algorithmList[targetName].ai_id],\r\n        })\r\n        .then(() => {\r\n          this.getDataAiPropertyList();\r\n          this.$message.success(\"操作成功\");\r\n        });\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.videoVisible = false;\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep .el-checkbox.is-bordered.el-checkbox--small {\r\n  margin: 0 5px 5px 0 !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.101.2/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.4.1_mlq2w24ovccw2zzwyvf7z5k5qa/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/.pnpm/vue-loader@15.11.1_7z3qvuhbfa5xwvetfv2z7hc6ey/node_modules/vue-loader/lib/index.js??vue-loader-options!./AI.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/.pnpm/thread-loader@3.0.4_webpack@5.101.2/node_modules/thread-loader/dist/cjs.js!../../../node_modules/.pnpm/babel-loader@8.4.1_mlq2w24ovccw2zzwyvf7z5k5qa/node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/.pnpm/vue-loader@15.11.1_7z3qvuhbfa5xwvetfv2z7hc6ey/node_modules/vue-loader/lib/index.js??vue-loader-options!./AI.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./AI.vue?vue&type=template&id=35583718&scoped=true\"\nimport script from \"./AI.vue?vue&type=script&lang=js\"\nexport * from \"./AI.vue?vue&type=script&lang=js\"\nimport style0 from \"./AI.vue?vue&type=style&index=0&id=35583718&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/.pnpm/vue-loader@15.11.1_7z3qvuhbfa5xwvetfv2z7hc6ey/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"35583718\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","on","goBack","directives","name","rawName","value","loading","expression","staticClass","attrs","$event","addTab","tabIndex","algorithmList","length","staticStyle","removeTab","chooseTab","model","callback","$$v","_l","item","key","ai_id","ai_name","completedDraw","_v","reset","videoVisible","ref","videoUrl","handleResolution","getVideo","closeVideo","_e","canvasVisible","formData","area","ratio","fullScreen","handleDrawFinish","interval","$set","threshold","saveData","sceneVisble","handleChange","sceneList","index","scene_name","checkedTabs","children","JSON","stringify","handleCheckedTabs","_s","staticRenderFns","handleCanvasSaveMove","handleCanvasMouseUp","handleCanvasMouseDown","props","single","type","Boolean","required","pointArr","Array","default","Number","data","canvasForm","coincidentDistance","oIndex","MovePointArr","pointX","pointY","ctxSave","canSave","ctx","can","lineColor","open","clickMove","pointColorArr","parse","watch","initCanvas","mounted","$nextTick","methods","$refs","canvas","width","canvasBox","clientWidth","height","clientHeight","getContext","strokeStyle","fillStyle","lineWidth","globalAlpha","canvasSaveinfo","map","forEach","xitem","x","y","push","color","canvasFill","canvasText","text","point","font","textAlign","textBaseline","fillText","arc","Math","PI","clearRect","beginPath","moveTo","i","lineTo","fill","stroke","e","offsetX","layerX","piX","piY","undefined","offsetY","layerY","makearc","GetRandomNum","canvasSave","saveCanvas","closePath","a","b","console","log","revoke","$emit","slice","Min","Max","Range","Rand","random","round","r","s","pop","component","components","DrawPanel","videoPlayer","activeNames","checkAll","isIndeterminate","pro_id","videLoad","created","getSceneList","$route","query","getDataAiPropertyList","beforeRouteLeave","to","from","next","source_id","sourceTab","page","$api","get","params","$router","back","boxWdith","videoWidth","then","res","play_url","getUrl","$message","warning","playUrl","hostname","window","location","newUrl","replace","getIPFromURL","url","match","ai_pro_id","post","success","toString","finally","canvasVueRef","region","scene_id","checked","target","targetName","beforeDestroy"],"sourceRoot":""}