"use strict";(self["webpackChunkvideogatewayweb"]=self["webpackChunkvideogatewayweb"]||[]).push([[244],{244:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var r=function(){var e=this,t=e._self._c;return t("div",[t("el-button",{staticClass:"mt-10",attrs:{size:"small",type:"primary"},on:{click:e.addUser}},[e._v("新增")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mt-10",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),t("el-table-column",{attrs:{prop:"user_name",label:"用户名",align:"center"}}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{staticClass:"el-icon-edit",attrs:{type:"text"},on:{click:function(t){return e.editUser(s.row)}}}),t("el-button",{staticClass:"el-icon-delete",staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(t){return e.delUser(s.row)}}})]}}])})],1),t("el-pagination",{staticClass:"mt-20",staticStyle:{float:"right"},attrs:{background:"",layout:"prev, pager, next",total:e.total,"current-page":e.page,"page-size":e.size},on:{"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:e.visibleTitle,visible:e.addVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.addVisible=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"user_name"}},[t("el-input",{model:{value:e.ruleForm.user_name,callback:function(t){e.$set(e.ruleForm,"user_name",t)},expression:"ruleForm.user_name"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"user_pwd"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.user_pwd,callback:function(t){e.$set(e.ruleForm,"user_pwd",t)},expression:"ruleForm.user_pwd"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"aginPwd"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.aginPwd,callback:function(t){e.$set(e.ruleForm,"aginPwd",t)},expression:"ruleForm.aginPwd"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},i=[],a={data(){let e=(e,t,s)=>{t!==this.ruleForm.user_pwd?s(new Error("两次输入密码不一致!")):s()};return{tableData:[],ruleForm:{},rules:{user_name:[{required:!0,message:"请输入用户名",trigger:"blur"}],user_pwd:[{required:!0,message:"请输入密码",trigger:"change"}],aginPwd:[{required:!0,message:"请输入密码",trigger:"change"},{validator:e,trigger:"change"}]},addVisible:!1,total:0,page:1,size:10,visibleTitle:"新增",loading:!1}},created(){this.getUserList()},methods:{handleCurrentChange(e){this.page=e,this.getUserList()},delUser(e){this.$confirm("是否删除该用户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$api.post("/user/delUser",{user_id:e.user_id}).then(()=>{this.$message.success("操作成功"),this.getUserList()})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},editUser(e){this.ruleForm={user_name:e.user_name,user_id:e.user_id},this.visibleTitle="编辑",this.addVisible=!0},submitForm(e){this.$refs[e].validate(e=>{if(!e)return!1;delete this.ruleForm.aginPwd,this.ruleForm.user_id?this.$api.post("/user/updateUser",this.ruleForm).then(()=>{this.$message.success("操作成功"),this.addVisible=!1,this.getUserList()}):this.$api.post("/user/addUser",this.ruleForm).then(()=>{this.$message.success("操作成功"),this.addVisible=!1,this.getUserList()})})},addUser(){this.ruleForm={},this.visibleTitle="新增",this.addVisible=!0},getUserList(){this.loading=!0,this.$api.get(`/user/userList?page=${this.page}&size=${this.size}`).then(e=>{this.tableData=e.data.data,this.total=e.data.total}).finally(()=>{this.loading=!1})}}},l=a,n=s(6790),o=(0,n.A)(l,r,i,!1,null,null,null),u=o.exports}}]);
//# sourceMappingURL=244.81ef84bb.js.map